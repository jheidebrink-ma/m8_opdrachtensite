<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Les 4 - M7PROG - Laravel</title> <link rel="shortcut icon" href="/m7prog_opdrachtensite/favicon.ico" type="image/x-icon"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;700&family=Fira+Sans:wght@400;500&display=swap" rel="stylesheet"> <link rel="stylesheet" href="/m7prog_opdrachtensite/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=false"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'false'); </script> <script type="text/javascript" src="/m7prog_opdrachtensite/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle> <line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path> <polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/m7prog_opdrachtensite/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"> <use xlink:href="#svg-menu"></use> </svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/m7prog_opdrachtensite/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/project_requirements.html" class="nav-list-link">Algemene en functionele eisen</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-1/" class="nav-list-link">Les 1</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-2/index" class="nav-list-link">Les 2</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-3/index" class="nav-list-link">Les 3</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-4/index" class="nav-list-link">Les 4</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-5/index" class="nav-list-link">Les 5</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-6/index" class="nav-list-link">Les 6</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-7/index" class="nav-list-link">Les 7</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-8/index" class="nav-list-link">Les 8</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-9/index" class="nav-list-link">Les 9</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-10/index" class="nav-list-link">Les 10</a></li></ul> </nav> <footer class="site-footer"> This is a learning site for awesome Webdevelopers.<br> <!--<small>This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</small>--> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header pl-5 pt-2"> <h1>M8PROG - WordPress custom theme</h1> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h2 class="text-green-100 fs-6" id="een-model-class-en-database-migration-maken">Een model class en database migration maken</h2> <p>Nu je een beeld hebt van hoe Laravel (PHP) via Eloquent samenwerkt met de database ben je klaar om zelf aan de slag te gaan.</p> <p>Dit ga je doen (de video kan je extra informatie geven):</p> <ol> <li>Een Eloquent model class en een database migration maken.</li> <li>De database migration aanpassen (welke velden wil je in je tabel?).</li> <li>De database migration uitvoeren, zodat de table ook echt wordt aangemaakt.</li> </ol> <hr /> <h2 id="1--model-class-aanmaken">1- Model class aanmaken</h2> <p>Het Model element is een vertaling / verbinding tussen de website en de database.<br /> Op onze website komen verschillende projecten.<br /> Voor deze projecten gaan wij een model aanmaken. Ook maken wij gelijk een database migratie aan, hiervoor gebruiken wij de <code class="language-plaintext highlighter-rouge">-m</code> optie.<br /> Zorg ervoor dat je model naam met een kapitaal begint.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php artisan make:model <span class="nt">-m</span> Project
</code></pre></div></div> <p>Je ziet nu dat er een model én een migratie aangemaakt zijn:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>INFO  Model [app/Models/Project.php] created successfully.

INFO  Migration [database/migrations/2024_02_05_151958_create_projects_table.php] created successfully.
</code></pre></div></div> <p>Open nu het Model bestand: <code class="language-plaintext highlighter-rouge">app/Models/Project.php</code> en bekijk eens welke functies er al beschikbaar zijn doordat hij een uitbreiding is op de algemene Model class. <br /> <em>Dit bestand kun je nu weer sluiten omdat wij verder gaan met de migraties.</em></p> <hr /> <h2 id="2--migratie">2- Migratie</h2> <p>Open nu het migratie bestand dat net is aangemaakt en voeg daar de elementen toe die noodzakelijk zijn.<br /> Dit bestand is te vinden in de folder <code class="language-plaintext highlighter-rouge">/database/migrations/</code> Meestal is dit het laatste bestand.<br /> Je ziet nu al een stukje code klaar staan dat ervoor zorgt dat er een nieuwe tabel aangemaakt wordt.<br /> Ook zie je dat Laravel alvast twee kolommen toe wilt voegen.<br /> Wij maken nu een paar extra elementen aan, bijvoorbeeld voor een titel en een omschrijving:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nc">Schema</span><span class="o">::</span><span class="nf">create</span><span class="p">(</span><span class="s1">'projects'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="kt">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">string</span><span class="p">(</span><span class="s1">'title'</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">text</span><span class="p">(</span><span class="s1">'description'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">nullable</span><span class="p">();</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">boolean</span><span class="p">(</span><span class="s1">'active'</span><span class="p">)</span><span class="o">-&gt;</span><span class="k">default</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="nf">timestamps</span><span class="p">();</span>
        <span class="p">});</span>
</code></pre></div></div> <p>Ik heb een column voor ‘title’ toegevoegd, een tekst column voor de description en een boolean om aan te geven of dit project wel of niet actief is. Kun je zelf nog andere elementen voor de projecten verzinnen? Misschien een <code class="language-plaintext highlighter-rouge">intro</code> column.<br /> Zie hier een overzicht van alle mogelijke types: <a href="https://laravel.com/docs/10.x/migrations#available-column-types">available-column-types</a><br /> <strong>Let op: blijf gebruik maken van engelse benamingen, gebruik niet <code class="language-plaintext highlighter-rouge">titel</code> en <code class="language-plaintext highlighter-rouge">title</code> door elkaar</strong></p> <hr /> <h2 id="3--migratie-uitvoeren">3- Migratie uitvoeren</h2> <p>Voor het toevoegen van de tabel met de kolommen hoeven wij geen mysql te schrijven, maar kan ik Laravel de opdracht geven om dit uit te voeren. Gebruik hiervoor de migratie functionaliteit van Laravel:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Wanneer je gebruik maakt van de originele docker setup
php artisan migrate
</code></pre></div></div> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// wanneer je gebruik maakt van sail
sail artisan migrate
</code></pre></div></div> <p>De kans is groot dat je nu een error ziet doordat Artisan geen verbinding kan maken met de database.<br /> De oplossing hiervoor is door dit commando uit te voeren vanaf de <code class="language-plaintext highlighter-rouge">laravel</code> / <code class="language-plaintext highlighter-rouge">php</code> instance in Docker.<br /> <em>Open daarvoor het terminal venster door in docker desktop op de drie puntjes achter de betreffende container te klikken en terminal te selecteren.</em></p> <p>Open nu de database interface ( via een app als <strong>HeidiSQL</strong> of <strong>SequelAce</strong> of de webinterface <strong>phpmyadmin</strong> ) en controleer of de tabel is toegevoegd.</p> <hr /> <h3 id="optionele-video">Optionele video:</h3> <h3 class="fs-4 text-blue-100" id="bekijk-de-video">Bekijk de video</h3> <div class="video"><div class="resp-container"><iframe class="resp-iframe" src="https://www.youtube.com/embed/WGYmEdzZgtM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div> <hr /> <h2 class="text-green-100 fs-5" id="commit-en-push">Commit en push</h2> <p>Commit en push ALTIJD na het maken van een opdracht of aan het einde van de les. Zo is je voortgang zichtbaar en ontvang je feedback en/of hulp op de laatste versie van je code als dat nodig is.</p> <hr /> <h3 class="text-green-100 fs-4" id="volgende-stap">Volgende stap:</h3> <p><a href="model-migration-seeders">Een database seeder maken</a></p> <footer> </footer> </div> </div> </div> </body> </html>
