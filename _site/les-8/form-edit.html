<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Les 8 - M7PROG - Laravel</title> <link rel="shortcut icon" href="/m7prog_opdrachtensite/favicon.ico" type="image/x-icon"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;700&family=Fira+Sans:wght@400;500&display=swap" rel="stylesheet"> <link rel="stylesheet" href="/m7prog_opdrachtensite/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=false"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'false'); </script> <script type="text/javascript" src="/m7prog_opdrachtensite/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle> <line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path> <polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/m7prog_opdrachtensite/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"> <use xlink:href="#svg-menu"></use> </svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/m7prog_opdrachtensite/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/project_requirements.html" class="nav-list-link">Algemene en functionele eisen</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-1/" class="nav-list-link">Les 1</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-2/index" class="nav-list-link">Les 2</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-3/index" class="nav-list-link">Les 3</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-4/index" class="nav-list-link">Les 4</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-5/index" class="nav-list-link">Les 5</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-6/index" class="nav-list-link">Les 6</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-7/index" class="nav-list-link">Les 7</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-8/index" class="nav-list-link">Les 8</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-9/index" class="nav-list-link">Les 9</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-10/index" class="nav-list-link">Les 10</a></li></ul> </nav> <footer class="site-footer"> This is a learning site for awesome Webdevelopers.<br> <!--<small>This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</small>--> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header pl-5 pt-2"> <h1>M8PROG - WordPress custom theme</h1> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h2 class="text-green-100 fs-6" id="aanpassen-gegevens-met-een-formulier">Aanpassen gegevens met een formulier</h2> <p>Het is natuurlijk leuk om gegevens toe te voegen, maar af en toe wil je ook iets kunnen wijzigen.<br /> Daarom ga je het formulier herbruiken om een rij uit de database table aan te passen.</p> <hr /> <h3 id="1--toevoegen-van-een-wijzig-link">1- Toevoegen van een wijzig link</h3> <p>Plaats bij elk project in het dashboard overzicht een <code class="language-plaintext highlighter-rouge">wijzig</code> link.<br /> De link naar deze actie is de route <code class="language-plaintext highlighter-rouge">model.edit</code>, waarbij je het model of het id als referentie moet meegeven.<br /> Bijvoorbeeld: <code class="language-plaintext highlighter-rouge">route('project.edit', $project)</code>.<br /> Deze url kun je opvragen door het volgende php artisan commando uit te voeren in de terminal:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> php artisan route:links
</code></pre></div></div> <p><strong>Note:</strong> Zorg ervoor dat deze knop alleen zichtbaar is voor mensen die ingelogd zijn.<br /> Voorbeeld, in mijn geval is dit een link die eruit ziet als een knop.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">auth</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">"{{route('project.edit', </span><span class="nv">$project</span><span class="s2">)}}"</span>
<span class="n">class</span><span class="o">=</span><span class="s2">"bg-yellow me-2 focus:outline-none text-white bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900"</span><span class="o">&gt;</span>
<span class="nc">Wijzig</span>
<span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span> 
<span class="o">@</span><span class="n">endauth</span>
</code></pre></div></div> <hr /> <h3 id="2--het-formulier-voorbereiden">2- Het formulier voorbereiden</h3> <p>Om het project aan te kunnen passen hebben wij een view nodig met een formulier.<br /> Hiervoor wil ik het formulier van de create gebruiken, maar ik wil hem niet kopiëren zodat ik het maar één keer hoef te onderhouden.<br /> Knip daarom het formulier uit de create view <em>( <code class="language-plaintext highlighter-rouge">resources/views/dashboard/projects/create.blade.php</code> )</em>. <br /> Plak dit formulier in een nieuw view bestand: <strong>form.blade.php</strong>. <br /> In het <code class="language-plaintext highlighter-rouge">create</code> bestand moet je nu aangeven dat je het formulier wilt includen, hierbij is het handig als je de route en method mee geeft zodat je het formulier op twee verschillende manieren kunt gebruiken (<code class="language-plaintext highlighter-rouge">PUT</code> en <code class="language-plaintext highlighter-rouge">POST</code>).<br /> Dit kun je doen als volgt waarbij ik als 2e parameter een array met waardes mee geef.:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="k">include</span><span class="p">(</span><span class="s1">'dashboard.projects.form'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'route'</span><span class="o">=&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'projects.store'</span><span class="p">),</span> <span class="s1">'method'</span><span class="o">=&gt;</span><span class="s1">'post'</span><span class="p">])</span>
</code></pre></div></div> <p>Omdat je volgens de browser alleen <code class="language-plaintext highlighter-rouge">GET</code> en <code class="language-plaintext highlighter-rouge">POST</code> kunt gebruiken moet ik een omweg maken om het formulier met een <code class="language-plaintext highlighter-rouge">PUT</code> methode te versturen.<br /> Daarom ziet het begin van het formulier na het verwerken er als volgt uit, waarbij <code class="language-plaintext highlighter-rouge">$method</code> gevuld is met de aarde bij de include hierboven.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"{{$route}}"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    @csrf
    {{ method_field($method) }}
</code></pre></div></div> <hr /> <h3 id="3--de-edit-view">3- De edit view</h3> <p>Kopieer nu de <code class="language-plaintext highlighter-rouge">add.blade.php</code> view of als je die niet hebt, <code class="language-plaintext highlighter-rouge">create.blade.php</code> bestand naar <code class="language-plaintext highlighter-rouge">edit.blade.php</code> en pas daar onder andere de titel aan zodat het duidelijk is dat je een project gaat aanpassen.<br /> Ik heb bijvoorbeeld deze titel geplaatst:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Je</span> <span class="n">gaat</span> <span class="n">nu</span> <span class="n">dit</span> <span class="n">project</span> <span class="n">bewerken</span><span class="o">:</span> <span class="p">{{</span><span class="nv">$project</span><span class="o">-&gt;</span><span class="n">title</span><span class="p">}}</span>
</code></pre></div></div> <p>De route <code class="language-plaintext highlighter-rouge">( action van het formulier )</code> moeten wij ook even wat aanpassen omdat je nu iets gaat opslaan.<br /> In de lijst met routes heb je waarschijnlijk ook deze route gezien: <code class="language-plaintext highlighter-rouge">projects.update</code> <br /> Daar zie je ook dat de methode <code class="language-plaintext highlighter-rouge">put</code> is in plaats van <code class="language-plaintext highlighter-rouge">post</code>, dus die moet ik aanpassen bij het laden van het formulier. <br /> De include in de <code class="language-plaintext highlighter-rouge">edit.blade.php</code> ziet er daarom als volgt uit:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="o">@</span><span class="k">include</span><span class="p">(</span><span class="s1">'dashboard.projects.form'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'route'</span><span class="o">=&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'projects.update'</span><span class="p">,</span> <span class="nv">$project</span><span class="p">),</span> <span class="s1">'method'</span><span class="o">=&gt;</span><span class="s1">'put'</span><span class="p">])</span>
</code></pre></div></div> <hr /> <h3 id="4--de-edit-functie">4- De edit functie</h3> <p>In de ProjectAdminController zoek je de edit functie op en zorg je dat het <code class="language-plaintext highlighter-rouge">edit.blade.php</code> bestand terug geeft met daarbij het model als extra parameter:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">edit</span><span class="p">(</span><span class="kt">Model</span> <span class="nv">$model</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'dashboard.model.edit'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'model'</span><span class="o">=&gt;</span><span class="nv">$model</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div></div> <hr /> <h3 id="5--meegeven-van-informatie-aan-de-velden">5- Meegeven van informatie aan de velden</h3> <p>In het formulier is het wel zo fijn als de oude data zichtbaar is in de velden. <br /> Daarom gaan wij op de plekken waar wij nu de oude data weergeven als extra parameter de originele data van het project meegeven, <em>als default waarde</em>.<br /> Een invulveld kan er daarom zo uit gaan zien:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"title"</span> <span class="na">name=</span><span class="s">"title"</span> <span class="na">type=</span><span class="s">"text"</span>
                <span class="na">value=</span><span class="s">"{{old('title', $project-&gt;title)}}"</span>
                <span class="na">class=</span><span class="s">"block w-full rounded-md border-0"</span><span class="nt">&gt;</span>
</code></pre></div></div> <p>Bekijk het formulier maar eens in de browser en zie dat de informatie van het project zichtbaar is in het formulier.</p> <hr /> <h3 id="7--model-ook-meegeven-bij-het-aanmaken">7- Model ook meegeven bij het aanmaken</h3> <p>Omdat je in het formulier het model object gebruikt moet je ervoor zorgen dat je bij het includen van het formulier in de <code class="language-plaintext highlighter-rouge">create.blade.php</code> ook een leeg model mee geeft zodat je geen error krijgt bij het aanmaken van een project.<br /> In de create.blade.php ziet mijn include er nu zo uit:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="k">include</span><span class="p">(</span><span class="s1">'dashboard.projects.form'</span><span class="p">,</span> 
    <span class="p">[</span>
        <span class="s1">'route'</span>   <span class="o">=&gt;</span><span class="nf">route</span><span class="p">(</span><span class="s1">'projects.store'</span><span class="p">),</span> 
        <span class="s1">'method'</span>  <span class="o">=&gt;</span><span class="s1">'post'</span><span class="p">,</span> 
        <span class="s1">'project'</span> <span class="o">=&gt;</span><span class="k">new</span> <span class="err">\</span><span class="nf">App\Models\Project</span><span class="p">()</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre></div></div> <hr /> <h3 id="optionele-video">Optionele video:</h3> <h3 class="fs-4 text-blue-100" id="intro-over-logindashboard-linkjes">Intro over login/dashboard linkjes</h3> <div class="video"><div class="resp-container"><iframe class="resp-iframe" src="https://www.youtube.com/embed/NB0uzSPVJCk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div> <hr /> <h3 class="fs-4 text-blue-100" id="bekijk-de-video">Bekijk de video</h3> <div class="video"><div class="resp-container"><iframe class="resp-iframe" src="https://www.youtube.com/embed/P25y0UCOWLg" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div> <p class="text-blue-100 fs-4">Zorg dat je een link vanaf de lijst met gegevens naar de <code class="language-plaintext highlighter-rouge">edit</code> route en daar ene view hebt met een formulier. Zorg dat je het formulier hergebruikt dat je al had gemaakt. Zorg ook dat de gegevens al worden ingevuld.</p> <h3 id="links">Links</h3> <ul> <li><a href="https://laravel.com/docs/9.x/blade#authentication-directives">Blade directives @auth en @guest</a></li> </ul> <hr /> <h2 class="text-green-100 fs-5" id="commit-en-push">Commit en push</h2> <p>Commit en push ALTIJD na het maken van een opdracht of aan het einde van de les. Zo is je voortgang zichtbaar en ontvang je feedback en/of hulp op de laatste versie van je code als dat nodig is.</p> <hr /> <h3 class="text-green-100 fs-4" id="volgende-stap">Volgende stap:</h3> <p><a href="edit-update">Gegegevens valideren en opslaan</a></p> <footer> </footer> </div> </div> </div> </body> </html>
