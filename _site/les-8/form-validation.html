<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Les 8 - M7PROG - Laravel</title> <link rel="shortcut icon" href="/m7prog_opdrachtensite/favicon.ico" type="image/x-icon"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;700&family=Fira+Sans:wght@400;500&display=swap" rel="stylesheet"> <link rel="stylesheet" href="/m7prog_opdrachtensite/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=false"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'false'); </script> <script type="text/javascript" src="/m7prog_opdrachtensite/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path> <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle> <line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line> <line x1="3" y1="6" x2="21" y2="6"></line> <line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path> <polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/m7prog_opdrachtensite/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"> <use xlink:href="#svg-menu"></use> </svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/m7prog_opdrachtensite/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/project_requirements.html" class="nav-list-link">Algemene en functionele eisen</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-1/" class="nav-list-link">Les 1</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-2/index" class="nav-list-link">Les 2</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-3/index" class="nav-list-link">Les 3</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-4/index" class="nav-list-link">Les 4</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-5/index" class="nav-list-link">Les 5</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-6/index" class="nav-list-link">Les 6</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-7/index" class="nav-list-link">Les 7</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-8/index" class="nav-list-link">Les 8</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-9/index" class="nav-list-link">Les 9</a></li><li class="nav-list-item"><a href="/m7prog_opdrachtensite/les-10/index" class="nav-list-link">Les 10</a></li></ul> </nav> <footer class="site-footer"> This is a learning site for awesome Webdevelopers.<br> <!--<small>This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</small>--> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header pl-5 pt-2"> <h1>M8PROG - WordPress custom theme</h1> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h2 class="text-green-100 fs-6" id="form-validatie-en-foutmeldingen">Form validatie en foutmeldingen</h2> <p>Nu wordt het tijd om de ingevulde gegevens te valideren, zodat er geen lege artikelen in de database toegevoegd kunnen worden.<br /> Je doet dit door validatie regels per invoerveld te definiëren en je gebruikt de <code class="language-plaintext highlighter-rouge">validate()</code> methode van het <code class="language-plaintext highlighter-rouge">$request</code> object om de validatie uit te voeren.</p> <p>Is een veld niet goed ingevuld dan stuurt Laravel je automatisch terug naar het formulier, zodat je de foutmelding(en) kunt tonen.<br /> Ook kun je de ingevoerde data weer in het veld plaatsen zodat je deze niet opnieuw hoeft in te vullen.</p> <h3 id="meer-informatie">Meer informatie</h3> <p>Ga naar de Laravel website en bekijk welke validatie regels er beschikbaar zijn: <a href="https://laravel.com/docs/10.x/validation#available-validation-rules">validatie regels</a></p> <hr /> <h3 id="1--request-data-controleren">1- Request data controleren</h3> <p>Om te beginnen ga je de verstuurde informatie weergeven. <br /> Open de controller waar je de CRUD functies in hebt staan, waarschijnlijk is dat <code class="language-plaintext highlighter-rouge">ProjectAdminController</code>.<br /> Werk nu in de <code class="language-plaintext highlighter-rouge">store</code> functie. <br /> Als argument zie je dat er een Request object meegegeven moet worden:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
</code></pre></div></div> <p>Dit object kun je weergeven door gebruik te maken van de debug functies van Laravel:<br /> <strong>debug dump()</strong>: <code class="language-plaintext highlighter-rouge">dump()</code><br /> <strong>debug die()</strong>: <code class="language-plaintext highlighter-rouge">dd()</code></p> <p>Probeer dit maar eens uit:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">dump</span><span class="p">(</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">all</span><span class="p">()</span> <span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div> <hr /> <p>Je ziet nu alle velden die verstuurd zijn vanuit het formulier. <br /> Probeer nu één veld weer te geven, door aan de input() fucntie mee te geven welk veld je wil zien.</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">dump</span><span class="p">(</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">input</span><span class="p">(</span><span class="s1">'veldnaam'</span><span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div> <hr /> <h3 id="2--validatie-instellen">2- Validatie instellen</h3> <p>Je weet nu hoe je de data kunt ophalen, nu gaan wij aan de slag met de validatie.<br /> Dit kan op twee manieren, of je plaatst het resultaat in een variabele óf je stopt het script als het niet goed is.<br /> De eerste optie is voor straks makkelijker omdat we dan gelijk de valide data in een array hebben.<br /> Je moet per element aangeven of het verplicht is en of er specifieke eisen zijn.<br /> Als de titel bijvoorbeeld <code class="language-plaintext highlighter-rouge">verplicht</code> is <strong>én</strong> <code class="language-plaintext highlighter-rouge">uniek</code> moet zijn in de posts tabel <strong>én</strong> hij <code class="language-plaintext highlighter-rouge">maximaal 255 karakters</code> mag bevatten dan zou dit werken:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$valid_data</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="nf">validate</span><span class="p">([</span>
            <span class="s1">'title'</span>      <span class="o">=&gt;</span> <span class="s1">'required|unique:posts|max:255'</span><span class="p">,</span>
            <span class="s1">'onderdeel'</span>  <span class="o">=&gt;</span> <span class="s1">'required'</span><span class="p">,</span>
        <span class="p">]);</span>
        
        <span class="nf">dd</span><span class="p">(</span><span class="nv">$valid</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></div></div> <p>Als je de verkeerde informatie invoert dan kom je weer terug op het formulier.</p> <hr /> <h3 id="3--errors-weergeven">3- Errors weergeven</h3> <p>Nu weet je alleen nog niet of het goed is gegaan, daarom moet je in de view bij het formulier ook de error weergeven als die er is.<br /> Dat doe je door deze code op de plek te plaatsen waar je de errors wilt zien, bijvoorbeeld in <code class="language-plaintext highlighter-rouge">views/dashboard/create.blade.php</code>:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="k">if</span> <span class="p">(</span><span class="nv">$errors</span><span class="o">-&gt;</span><span class="nf">any</span><span class="p">())</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">"p-2 bg-yellow border-2 rounded"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
            <span class="o">@</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span><span class="o">-&gt;</span><span class="nf">all</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$error</span><span class="p">)</span>
                <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nv">$error</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
            <span class="o">@</span><span class="k">endforeach</span>
        <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">@</span><span class="k">endif</span>
</code></pre></div></div> <ol> <li>Hierbij controleer ik eerst of er errors zijn.</li> <li>Als dat het geval is dan laat ik een list zien.</li> <li>In deze list plaats ik alle errors via een foreach loop.</li> </ol> <hr /> <h3 id="4--weergeven-van-oude-data">4- Weergeven van oude data</h3> <p>Het is prettig dat als je een formulier invult en er errors zijn, je nog wel de oude data ziet.<br /> Hiervoor moet je de oude values toevoegen aan de velden.<br /> Dit doe je door een value toe te voegen, in dit geval voor het veld titel: <code class="language-plaintext highlighter-rouge">{{old('title')}}</code></p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">"veldnaam"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"{{old('veldnaam')}}"</span> <span class="nt">/&gt;</span>
</code></pre></div></div> <hr /> <h3 id="optionele-video">Optionele video:</h3> <h3 class="fs-4 text-blue-100" id="bekijk-de-video">Bekijk de video</h3> <div class="video"><div class="resp-container"><iframe class="resp-iframe" src="https://www.youtube.com/embed/az8ZV_XQJmI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div> <p class="text-blue-100 fs-4">Zorg dat je een formulier hebt met validatie regels en foutmeldingen en dat de “oude” inpout were wordt getoond als er validatie errors zijn, zodat je niet alles opnieuw hoft in te vullen.</p> <h3 id="links">Links</h3> <ul> <li><a href="https://laravel.com/docs/10.x/requests">Documentatie over requests</a></li> <li><a href="https://laravel.com/docs/10.x/validation">Documentatie over form validatie</a></li> <li><a href="https://laravel.com/docs/10.x/validation#available-validation-rules">Alle validatie regels</a></li> <li><a href="https://laravel.com/docs/10.x/validation#quick-displaying-the-validation-errors">Documentatie over foutmeldingen tonen </a></li> <li><a href="https://laravel.com/docs/10.x/requests#old-input">Documentatie over tonen van eerdere invoer</a></li> </ul> <hr /> <h2 class="text-green-100 fs-5" id="commit-en-push">Commit en push</h2> <p>Commit en push ALTIJD na het maken van een opdracht of aan het einde van de les. Zo is je voortgang zichtbaar en ontvang je feedback en/of hulp op de laatste versie van je code als dat nodig is.</p> <hr /> <h3 class="text-green-100 fs-4" id="volgende-stap">Volgende stap:</h3> <p><a href="model-save">Gegevens opslaan via je model class</a></p> <footer> </footer> </div> </div> </div> </body> </html>
